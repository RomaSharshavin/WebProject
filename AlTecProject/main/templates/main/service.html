{% extends 'main/base.html' %}
{% load static %}

{% block title %}
Продукция
{% endblock %}

{% block links %}
    <link rel="stylesheet" href="{% static 'css/stylesService.css' %}">
    <style>
        .container {
            display: flex;
        }
        /* Стили для меню */
        .menu {
            height: 800px;
            width: 400px; /* Ширина меню */
            max-width: 100%; /* Ограничение ширины для мобильных устройств */
            position: fixed; /* Фиксируем меню при прокрутке */
            top: 118px; /* Расположение сверху */
            left: 0px; /* Расположение слева */
            background-color: #fff; /* Цвет фона */
            padding: 20px; /* Внутренний отступ */
            border-radius: 5px; /* Скругление углов */
            margin-bottom: 100px; /* Значение можно изменить по необходимости */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Тень для эффекта */
        }

        .menu-item {
            cursor: pointer; /* Указатель при наведении */
            padding: 8px; /* Отступ в меню */
            margin-top: 20px;
            border-bottom: 1px solid #ccc; /* Разделитель между элементами */
            white-space: normal; /* Позволяет переносить текст на следующую строку */
        }

        .dropdown {
            display: none; /* Изначально скрыто */
            margin-top: 5px; /* Отступ сверху для выпадающего списка */
            padding-left: 10px; /* Отступ для вложенных элементов */
        }
        .dropdown-item {
            padding: 5px; /* Отступ для элементов выпадающего списка */
            white-space: normal; /* Позволяет переносить текст на следующую строку */
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="menu">
            <div class="menu-item" onclick="toggleDropdown('category1')">Мойки для транспорта TAMMERMATIC
                <div id="category1" class="dropdown">
                    <div class="dropdown-item" onclick="event.stopPropagation(); toggleDropdown('subcategory1')">Автоматические мойки для транспорта
                        <div id="subcategory1" class="dropdown">
                            <div class="dropdown-item">Конвеерная автомойка RoboJet</div>
                            <div class="dropdown-item">Портальная атомойка Т700 Jet</div>
                            <div class="dropdown-item">Портальная атомойка Т700 Lux</div>
                            <div class="dropdown-item">Портальная атомойка Т700 Pro</div>
                            <div class="dropdown-item">Портальная атомойка Т700 Takt</div>
                            <div class="dropdown-item">Портальная атомойка Т700 Twin</div>

                        </div>
                    </div>
                     <div class="dropdown-item" onclick="event.stopPropagation(); toggleDropdown('subcategory2')">Автоматические мойки для грузовых машин
                        <div id="subcategory2" class="dropdown">
                            <div class="dropdown-item">Автоматическая мойка Rainbow ULTIMA</div>
                        </div>
                    </div>
                    <div class="dropdown-item" onclick="event.stopPropagation(); toggleDropdown('subcategory3')">Автоматические мойки для поездов метро
                        <div id="subcategory3" class="dropdown">
                            <div class="dropdown-item">Автоматическая мойка поездов XJ 204</div>
                        </div>
                    </div>
                    <div class="dropdown-item" onclick="event.stopPropagation(); toggleDropdown('subcategory4')">Автоматические мойки для ж/д транспорта
                        <div id="subcategory4" class="dropdown">
                            <div class="dropdown-item">Автоматическая мойка поездов XJ1000-16D</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="menu-item" onclick="toggleDropdown('category2')">Производство АЛ-ТЕК
                <div id="category2" class="dropdown">
                    <div class="dropdown-item">Складчатые ворота "IDEAL"</div>
                    <div class="dropdown-item">Промышленные ворота "Идеал"</div>
                    <div class="dropdown-item">Система отчистки воды</div>
                </div>
            </div>
            <div class="menu-item" onclick="toggleDropdown('category3')">Мойки деталей TEIJO
                <div id="category3" class="dropdown">
                    <div class="dropdown-item">Мойка деталей TL-серии</div>
                    <div class="dropdown-item">Мойка деталей с фронтальной выгрузкой</div>
                    <div class="dropdown-item">Моечные машины с пневматической дверцей</div>
                    <div class="dropdown-item">Двухстадийные моечные машины с пневматической подъемной дверцей PD</div>
                    <div class="dropdown-item">Трехстадийные моечные машины с пневматической подъемной дверцей PD</div>
                    <div class="dropdown-item">Двухстадийные моечные машины с пневматической подъемной дверцей EVO PD</div>
                    <div class="dropdown-item">Туннельные, конвейерные мойки деталей и агрегатов TEIJO</div>
                    <div class="dropdown-item">Мойки деталей под заказ</div>
                </div>
            </div>
            <div class="menu-item" onclick="toggleDropdown('category4')">Промышленные ворота ASSA ABLOY (CRAWFORD)
                <div id="category4" class="dropdown">
                    <div class="dropdown-item" onclick="event.stopPropagation(); toggleDropdown('subcategory5')">Подъемно-секционные ворота
                        <div id="subcategory5" class="dropdown">
                            <div class="dropdown-item">Подъемно-секционные ворота ASSA ABLOY (Crawford) 242</div>
                            <div class="dropdown-item">Подъемно-секционные ворота ASSA ABLOY (Crawford) 242FG</div>
                            <div class="dropdown-item">Подъемно-секционные ворота ASSA ABLOY (Crawford) 542D</div>
                            <div class="dropdown-item">Подъемно-секционные ворота ASSA ABLOY (Crawford) OH1042F</div>
                            <div class="dropdown-item">Подъемно-секционные ворота ASSA ABLOY (Crawford) OH1042P</div>
                            <div class="dropdown-item">Подъемно-секционные ворота ASSA ABLOY (Crawford) 370</div>

                        </div>
                    </div>
                     <div class="dropdown-item" onclick="event.stopPropagation(); toggleDropdown('subcategory6')">Складные ворота
                        <div id="subcategory6" class="dropdown">
                             <div class="dropdown-item">Складные ворота ASSA ABLOY (Crawford) FD2050F</div>
                             <div class="dropdown-item">Складные ворота ASSA ABLOY (Crawford) FD2050FCW</div>
                             <div class="dropdown-item">Складные утепленные промышленные ворота ASSA ABLOY (Crawford) FD2250P</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="partners-container">
            {% for service in services %}
                <div class="partner">
                    <div class="partner-description">
                        {{ service.prod_name }}  <!-- Используйте правильное имя поля -->
                    </div>
                    <img src="{{ service.image_path }}" alt="{{ service.alt }}">
                    <div class="partner-description">
                        <a href="{% url 'service_detail' service.id_prod %}">ПОДРОБНЕЕ</a>
                    </div>
                </div>
            {% endfor %}
        </div>

            <div class="pagination" style="text-align: center;">
                <span class="page-number" onclick="loadPage({{ current_page|add:'-1' }})" {% if current_page == 1 %}style="display: none;"{% endif %}>&lt;</span>
                {% for page_num in products.paginator.page_range %}
                    <span class="page-number" onclick="loadPage({{ page_num }})" {% if page_num == current_page %}style="font-weight: bold;"{% endif %}>{{ page_num }}</span>
                {% endfor %}
                <span class="page-number" onclick="loadPage({{ current_page|add:'1' }})" {% if current_page == total_pages %}style="display: none;"{% endif %}>&gt;</span>
            </div>
        </div>
    </div>


{% block scripts %}
    <script>
        function loadPage(pageNumber) {
            const url = `{% url 'service' %}?page=` + pageNumber;
            window.location.href = url; // Переход на новую страницу.
        }

       function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            if (dropdown) {
                if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                    dropdown.style.display = 'block';
                } else {
                    dropdown.style.display = 'none';
                }
            }
       }

// Закрывать выпадающий список, если пользователь кликает вне его
        window.onclick = function(event) {
            if (!event.target.matches('.menu-item') && !event.target.matches('.dropdown-item')) {
                var dropdowns = document.getElementsByClassName("dropdown");
                for (var i = 0; i < dropdowns.length; i++) {
                    dropdowns[i].style.display = "none";
                }
            }
        }
    </script>
{% endblock %}

{% endblock %}
